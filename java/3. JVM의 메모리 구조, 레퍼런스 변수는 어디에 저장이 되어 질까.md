## 3. JVM의 메모리 구조, 레퍼런스 변수는 어디에 저장이 되어 질까

### 🧠 개념 설명

- 5가지 영역이 존재

1. Method Area
- 클래스 이름, 필드, 메서드 정보
- static 변수
- final 변수
- 생명주기 : JVM 시작시 생성, 프로그램 종료 까지 존재
- 명시적으로 Null 선언 시 GC 대상


2. Heap
- 런타임 시 동적으로 할당하고 사용하는 메모리 영역
- New 연산자를 통해 생성한 객체, 인스턴스와 배열을 저장
- 객체가 더 이상 쓰지 않거나 명시적으로 Null 선언 시 GC 대상


3. PC Register (프로그램 카운터 레지스터)
- 현재 실행중인 바이트 코드 명령의 주소를 저장


4. Stack
- 메서드 호출 시 생성되는 스레드 수행 정보를 기록하는 Frame 저장
- 메서드 정보
- 지역변수, 파라미터, 연산중 발생하는 임시 데이터 저장
- 메서드 호출이 끝나면 스택 프레임이 pop 됨


5. Native Method Stack
- 자바 외 언어로 작성된 네이티브 코드를 위한 메모리 영역


6. 특징 
- Method Area 와 Heap 은 모든 스레드에서 공유
- PC Register, Stack, Native Method Stack 은 각 스레드 별로 생성


7. 레퍼런스 변수는 어디에?
- JVM 메모리 구조에서 변수는 Stack 영역에 저장되고 해당 레퍼런스가 가리키는 실제 객체(new 로 생성된 인스턴스)는 Heap 영역에 저장되어진다.
  ```java
  User user = new User();
  ```
  라고 되어 있을때
- user 변수는 Stack 영역에 저장이 되고 Heap 영역에 생성된 User 객체의 주소 값을 참조하고 있다.

---

### ✅ 한줄로 설명 하기
- 메모리 구조 
  - 메모리 영역은 5가지가 있습니다. Method Area, Heap, PC Register, Stack, Native Method Stack 이 있는데 Method Area와 Heap은 모든 스레드에서 공유 되어지고 나머지는 각 스레드별로 생성이 됩니다. 
  - Method Area는 JVM 시작 시 생성하고 프로그램 종료까지 존재합니다 클래스 이름, 필드, 메서드 정보가 저장이되어 집니다.
  - Heap은 런타임시에 동적으로 할당되어지고 new 연산자로 생성한 객체, 인스턴스와 배열을 저장합니다.
  - PC Register는 현재 실행중인 바이트 코드 명령의 주소를 저장합니다.
  - Stack은 메서드 호출 시 생성되는 스레드 수행정보를 기록하는데 메서드 정보, 지역변수, 파라미터와 연산 중 발생하는 임시 데이터 저장이 되어집니다. 메서드 호출이 끝나면 스텍 프레임이 pop 되어집니다.
  - Native Method Stack은 자바외 언어로 저장된 네이티브 코드를 위한 메모리 영역입니다.
 
- 레퍼런스 변수는 어디에? 
  - 객체는 Heap에 저장되고 객체를 가리키는 참조 변수는 Stack 에 저장 되어 집니다.

