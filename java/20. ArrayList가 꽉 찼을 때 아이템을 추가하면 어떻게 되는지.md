## 20. ArrayListê°€ ê½‰ ì°¼ì„ ë•Œ ì•„ì´í…œì„ ì¶”ê°€í•˜ë©´ ì–´ë–»ê²Œ ë˜ëŠ”ì§€

### ğŸ§  ê°œë… ì„¤ëª…
```java
public boolean add(E e) {
        modCount++;
        add(e, elementData, size);
        return true;
    }
```

- modCountëŠ” êµ¬ì¡° ë³€ê²½ íšŸìˆ˜ë¥¼ ì¶”ì í•˜ëŠ” ë³€ìˆ˜ì´ë‹¤.
- fail-fast ë™ì‘ì„ ìœ„í•´ Iterator ë¡œ ìˆœíšŒí• ë•Œ ì¤‘ê°„ì— ë‹¤ë¥¸ ì½”ë“œê°€ êµ¬ì¡°ë¥¼ ë³€ê²½í•˜ë©´ ConcurrentModificationExceptioinì„ ë°œìƒì‹œí‚¨ë‹¤

<br/>

```java
private void add(E e, Object[] elementData, int s) {
        if (s == elementData.length)
            elementData = grow();
        elementData[s] = e;
        size = s + 1;
    }
```
- size ë‘ ë°°ì—´ í¬ê¸°ê°€ ê°™ìœ¼ë©´ grow()ë¥¼ í˜¸ì¶œí•œë‹¤.

<br/>
  
```java
private Object[] grow(int minCapacity) {
        int oldCapacity = elementData.length;
        if (oldCapacity > 0 || elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {
            int newCapacity = ArraysSupport.newLength(oldCapacity,
                    minCapacity - oldCapacity, /* minimum growth */
                    oldCapacity >> 1           /* preferred growth */);
            return elementData = Arrays.copyOf(elementData, newCapacity);
        } else {
            return elementData = new Object[Math.max(DEFAULT_CAPACITY, minCapacity)];
        }
    }
```
- grow()ëŠ” ë‚´ë¶€ ë°°ì—´ì˜ í¬ê¸°ë¥¼ ê¸°ì¡´ì˜ 1.5ë°°ë¡œ í™•ì¥í•˜ê±°ë‚˜ ìµœì†Œí•œ minCapcity ë§Œí¼ì€ ë˜ë„ë¡ ì¡°ì •í•œë‹¤.

---
### âœ… í•œì¤„ë¡œ ì„¤ëª… í•˜ê¸°

- ArrayListëŠ” ë‚´ë¶€ ë°°ì—´ì´ ê½‰ ì°¨ë©´ grow()ë¥¼ í†µí•´ ë°°ì—´ í¬ê¸°ë¥¼ 1.5ë°°ë¡œ ëŠ˜ë¦¬ê³ 
- ê¸°ì¡´ ë°ì´í„°ë¥¼ ë³µì‚¬í•˜ì—¬ ìƒˆ ë°°ì—´ë¡œ êµì²´í•œ í›„ ìš”ì†Œë¥¼ ì¶”ê°€í•˜ë©° ì´ ê³¼ì •ì—ì„œ modCountë¥¼ ì¦ê°€ì‹œì¼œ êµ¬ì¡° ë³€ê²½ì„ ì¶”ì í•œë‹¤.
