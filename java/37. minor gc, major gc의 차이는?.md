## 37. minor gc, major gc의 차이는?

### 🧠 개념 설명
- GC 는 주기적으로 힙 메모리를 검사해서 더 이상 참조되지 않는 객체를 찾아내고 메모리를 자동으로 회수하여 메모리 누수를 방지하는 역할을 한다
- 한마디로 더 이상 필요 없는 객체는 GC가 알아서 치운다

**GC가 메모리를 회수하는 대상**
- 힙 메모리 영역에 있는 객체
- Metaspace 영역의 클래스 메타 데이터도 클래스 로더가 해제될때 수거된다

<br/>

**GC 종류**
- Minor GC
- Major GC

<br/>

**Minor GC vs Major GC**

1. Minor GC
- 대상 : Young Generation (Eden + Survivor 영역)
- 동작 방식
  - 객체가 Eden에 생성되고 Young 영역이 가득 차면 Minor GC 발생
  - 살아남은 객체는 Survivor 영역으로 이동하거나 일정 조건이 충족되면 Old Generation으로 이동
- 비용
  - 짧고 빠르다
  - Young 영역이 상대적으로 작고 대부분의 객체가 바로 수거되기 때문이다
 
- 특징
  - Young Generation 대상
  - 발생 빈도가 높다
  - 응답 지연에 영향이 작다
 
<br/>

2. Major GC
- 대상 : Old Generation
- 동작 방식
  - Old Generation이 가득 차면 Major GC 발생
  - Old 영역은 오래 살아남은 객체가 많고 압축 작업도 있어 시간이 오래 걸린다
  - 애플리케이션이 일시 정지 되는 시간이 길다
 
- 비용
  - 비교적 길고 무겁다
  - 발생 빈도는 낮지만 한 번 발생할 때 성능에 큰 영향을 준다
 
- 특징
  - Old Generation 대상
  - 발생 빈도 낮음
  - 응답 지연에 영향이 크다

<br/>

**왜 Major GC는 무겁고 성능에 영향을 줄까**
- Old Generation에는 생존 기간이 긴 객체가 쌓여 있다
- GC가 일어날 때 단순하게 삭제만 하는게 아니라 살아있는 객체를 모두 검사해야 한다
- 검사 대상 객체 수 자체가 많아 처리 시간이 길어진다
- Mark - Sweep - compact 과정을 거치는데 작업 비용이 크다

**중요한 점**
- Minor GC는 자연스럽게 자주 일어나도 큰 문제가 되지 않는다
- 하지만 Major GC는 발생할때 애플리케이션이 멈추는 시간이 길어져서 서비스 성능 저하로 이어질 수 있다
- 그래서 Major GC 발생 빈도를 최소화하는 것이 튜닝의 핵심이다

---
### ✅ 한줄로 설명 하기
- Minor GC는 Heap 영역에서 Young Generation을 Major GC는 Old Generation을 대상으로 실행되고
- Minor GC는 자주 빠르게 수행 하지만 Major GC는 발생 빈도는 낮지만 한 번 발생할 때 성능에 영향을 준다
