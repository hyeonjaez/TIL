## 28. 테스트 클래스에 트랜잭셔널 어노테이션을 붙이면 어떻게 될까?

### 🧠 개념 설명
- 각 테스트 메서드마다 트랜잭션을 시작한다
- 테스트 메서드가 끝난후에 자동으로 롤백을 수행한다
- DB 상태를 깨끗하게 유지할 수 있어 테스트 간 간섭을 막아준다

**메서드 수준 vs 클래스 수준**
- 클래스 레벨 -> 모든 테스트 메서드에 적용
- 메서드 레벨 -> 해당 메서드에만 적용
- 둘다 있다면? -> 메서드 레벨이 우선

**롤백 제어**
- 테스트에서 실제로 DB에 반영하고 싶으면 @Rollback(false) 를 붙일수 있다

<br/>

**주의할 점**
- @Transactional을 사용하면 트랜잭션 안에서 동작해서 지연로딩이 테스트 코드 안에서도 동작한다
- 하지만 @Transactional(propagation = Propagation.NOT_SUPPORTED) 같은 걸 지정하면 테스트 메서드 자체는 트랜잭션 없이 실행할 수도 있다. (보통 동시성 테스트 때 사용)
- @DataJpaTest에는 기본적으로 @Transactional이 포함되어 있어서 항상 롤백 된다


---
### ✅ 한줄로 설명 하기
- 테스트 클래스에 @Transactional을 붙이면 각 테스트 메서드마다 트랜잭션이 시작되고 종료시에 자동으로 롤백되어 DB 상태를 초기화해준다
