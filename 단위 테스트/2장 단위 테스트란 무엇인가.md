## 2장 단위 테스트란 무엇인가

**단위 테스트 정의 - 세가지 속성**
1. 작은 코드 조각을 검증
2. 빠르게 수행해야 함
3. 격리된 방식으로 처리되는 자동화된 테스트

<br/>

- 여기에서 격리가 어떤 의미를 갖느냐가 두가지로 나뉜다
  - 고전파 : 테스트 간 격리를 중시
  - 런던파 : 테스트 대상 단위의 협력자를 테스트 대역으로 격리하는 방식에 주목
 
<br/>

**격리에 대한 각 분파의 관점**
- 런던파:
  - 테스트 대상 클래스가 의존하는 협력자들을 모두 테스트 대역으로 대체하여 SUT만 집중해서 테스트 한다
    - MUT : 테스트 대상 메서드는 테스트에서 호출한 SUT의 메서드다 MUT와 SUT는 흔히 동의어로 사용하지만 일반적으로 MUT는 메서드를 가리키는 데 반해 SUT는 클래스 전체를 가리킨다
  - 장점 : 테스트 실패 시 "문제가 이 클래스에 있다" 확신이 들고 복잡한 객체 그래프를 상대적으로 덜 고려해도 된다는 점이 있다
  - 주의할 점 : 테스트가 구현 세부사항에 너무 결합될 수 있고 테스트 유지비용이 커질 수 있다는 논의가 있다

<br/>

- 고전파:
  - 테스트는 단위 테스트 간에 서로 격리되어야 한다 다시말해, 한 테스트가 다른 테스트의 상태나 실행에 영향을 주면 안된다
  - 공유 의존성이나 외부 프로세스 의존성 등의 개입이 있으면 단위 테스트가 아니라 통합 테스트가 된다고 본다
  - 이 관점에서 테스트 대상 단위는 꼭 클래스 하나일 필요 없고 동작의 단위여야 한다

 <br/>
 
**통합 테스트와의 관계**
- 고전파 기준으로 보면 단위 테스트의 세가지 속성중 하나라도 만족하지 못하는 테스트는 통합 테스트로 본다
- 엔드 투 엔드 테스트는 통합 테스트의 한 범주로 대부분의 외부 의존성과 실제 시스템 요소를 포함하여 더욱 비용과 시간이 많이 든다.

<br/>

**나의 정리**
- 단위테스트는 빠르고, 격리되어 있고, 작아야 한다
- 이 중에서 '격리'가 관점에 따라 달라진다
- 내가 테스트할 때는 내 코드가 외부에 의존하지 않고 스스로 검증될 수 있는 상태인지 항상 체크해야 한다
- 외부 의존성이 많거나 느리면 통합 테스트일 가능성이 높다
- 고전파 스타일이라면 "이 테스트가 다른 테스트나 외부 영향 없이 실행되는가?"
- 런던파 스타일이라면 "이 테스트 대상의 모든 협력자를 격리했는가?
- 구현 세부사항까지 테스트하는 것은 경계가 필요하다 왜냐하면 테스트 유지보수가 커진다




