## 8. MySQL에서 인덱스와 락의 관계는?

### 🧠 개념 설명
- InnoDB는 레코드 단위 락을 사용한다
- InnoDB의 잠금은 레코드를 잠그는 것이 아니라 인덱스를 잠그는 방식으로 처리된다
- 다시 말해서 변경해야할 레코드를 찾기 위해 인덱스의 레코드를 모두 락을 걸어야 한다

**인덱스가 있는 경우**
- 해당 칼럼이 인덱여서 인덱스를 타고 해당 레코드를 찾아간다
- InnoDB는 해당 레코드에서만 레코드 락을 건다
- 다른 레코드에는 영향이 없다 -> 동시성 좋음


**인덱스가 없는 경우**
- 인덱스가 없어서 InnoDB는 테이블 풀 스캐을 한다
- MySQL 은 어떤 레코드가 조건을 만족할지 알 수 없어서 모든 레코드에 락을 걸어버린다
- 테이블 락에 가까운 효과이고 동시성이 안좋다

**인덱스 결과에 락을 건다의 의미**
- InnoDB는 테이블 자체에 락을 거는게 아니라 인덱스 탐색 결과에 대해 락을 건다
- 인덱스를 잘 활용하면 불필요한 락 범위를 줄이고 동시성을 높일수 있다
- 인덱스를 타지 않는 쿼리는 테이블 전체에 락이 걸려버릴 경우가 있다




---
### ✅ 한줄로 설명 하기

**MySQL(InnoDB)은 인덱스를 통해 찾은 “검색 결과 집합”에 락을 건다.**

인덱스를 잘 활용하면 동시성을 높이고 락 경합을 줄일 수 있고 인덱스가 없으면 테이블 전체가 잠겨버려 성능 문제가 발생한다.
