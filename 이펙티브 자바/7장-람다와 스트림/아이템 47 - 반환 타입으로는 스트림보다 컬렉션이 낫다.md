## 아이템 47 - 반환 타입으로는 스트림보다 컬렉션이 낫다

- 메서드가 시퀀스를 반환할때는 스트림을 직접 반환하지 말고 Collection을 반환하는 게 더 낫다.

**스트림만 반환했을때의 한계**
```java
public Stream<Card> cards() {
    return Stream.of(Suit.values())
                 .flatMap(suit -> Stream.of(Rank.values())
                                        .map(rank -> new Card(suit, rank)));
}
```
- 스트림만 반환하면 클라이언트는 한번만 소비할수 있고 재사용할수 없다.
- 단순히 for-each 문으로 돌리고 싶어도 안된다.

 <br/>
 
**Collection 반환**
```java
public static final List<Card> cards;
static {
    cards = new ArrayList<>();
    for (Suit suit : Suit.values()) {
        for (Rank rank : Rank.values()) {
            cards.add(new Card(suit, rank));
        }
    }
}

public static Collection<Card> cards() {
    return cards;
}
```
- 장점:
  - for-each 반복문 가능
  - 필요하면 .stream() 호출해서 스트림 파이프라인에도 사용가능하다
  - 재사용 가능하다

 <br/>
 
**만약 무한 시퀀스를 반환해야할때**
- Collection은 크기가 유한하다
- 이 경우에는 Stream이나 Iterable을 반환하는 것이 적절하다

<br/>

**책에서 말하는것**
- 클라이언트가 데이터를 다루는 방식까지 고려해서 반환 타입을 선택해야 한다.

 <br/>
 
**나의 정리**
- 시퀀스를 반환할때는 스트림 보다 Collection을 반환하자 왜냐하면 Collection은 반복문, 스트림 변환, 재사용 가능 등의 장점이 있다.
- Stream은 한번만 소비할수 있고 반복문에 바로 쓰지 못해서 무한 스트림이나 단발성 소비 같은 특수한 경우에만 반환하는 것이 좋다.
