## 아이템 6 - 불필요한 객체 생성을 피하라

- 일단 가장 대표적인 예시로 String 생성이 있는데
- String 생성은 2가지가 있다

```java
String str1 = new String("ab");
String str2 = "abc";
```

- 위 방식중에 첫번째 new의 방식은 heap 메모리에 인스턴스를 만드는것이다
- 두번째 방식은 String 상수풀에 "abc" 를 만들고 재사용할수 있다
- 첫번째 방식의 문제는 인스턴스가 계속 만들어 진다는 문제가 있다

- 책에서는 이렇게 불필요한 객체 생성을 피하라고 한다
- 생성자 대신 정적 팩터리 메서드를 제공하는 불변 클래스에서는 정적 팩터리 메서드를 사용해서 불필요한 객체 생서을 피할수 있다

<br/>

**비싼 객체 예시 : DB 커넥션**
- 생성 비용이 아주 비싼 객체가 있다
- 만약 비싼 객체가 반복해서 필요하다면 캐싱하여 재사용 하는 것을 권장한다
- 스프링을 사용한다면 알고 있는 커넥션 풀을 예를들수 있다

**DB 커넥션 객체가 생성 비용이 비싼 이유?**
- DB 커넥션을 맺으려면 서버와 DB 서버 사이에 연결을 맺어야 한다 -> 3-way handshake, 네트워크 패킷 송수신 등등 시간이 걸림
- 연결시 DB는 사용자 계정, 비밀번호 검증을 수행
- 연결할때마다 새로운 세션을 만들고 관리하기 위해 메모리, 버퍼, 스레드 같은 리소스를 할당해야 한다
- DB와의 상호작용 상태를 관리하는 것도 포함 되고 이런 설정도 초기화할때마다 비용이 발생한다

- 그래서 요청마다 커넥션 객체를 생성하고 삭제하게 된다면
  - 네트워크 지연, DB 세션 관리 부담, GC 부하가 일어나게 된다
 
**그래서 어떻게 했을까?**
- 커넥션 풀을 사용해서 커넥션들을 생성해놓고 재사용해서 사용한다

## 나의 정리
- 불필요한 객체 생성을 피하라
- 특히 비싼 객체는 매번 만들지 말고 재사용하는 전략을 활용하라 -> 캐싱
