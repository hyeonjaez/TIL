## 아이템 2 - 생성자에 매개변수가 많다면 빌더를 고려하라

- 정적 팩터리와 생성자에서 선택적 매개변수가 많다면 어떻게 해야할까?
-> 기존에는 점층적 생성자 패턴을 사용했다 : 선택적으로 받아야하는 매개변수들을 늘려서 생성자를 늘리는 방식

**점층적 생성자 패턴의 단점** 
- 매개변수가 많아지면 코드를 작성하거나 읽기 어려워진다 
- 실수로 매개변수의 순서를 바꿔 호출해도 컴파일러는 알아채지 못한다

---

**다른 방식은? -> 자바 빈즈 패턴**
- 기존의 점층적 생성자 패턴의 단점들은 보이지 않는다
- 동작 과정
  1. 기본 생성자를 만든다
  2. setter()를 이용해서 각 필드의 값을 주입한다
 
**자바 빈즈 패턴 단점**
- 코드량이 길어진다
- 객체 하나를 만들려면 메서드를 여러개 호출해야 하고 객체가 완전히 생성되기까지는 일관성이 무너진 상태에 놓이게 된다
- 가장 큰 단점은 불변객체를 만들수가 없다

---

**그래서 나온 대안은 -> 빌더 패턴**
- 클라이언트는 필요한 객체를 직접 만드는 대신 필수 매개변수만으로 생성자를 호출해 빌더 객체를 얻는다.
- 그리고 빌더 객체가 제공하는 일종의 세터 메서드들로 원하는 선택 매개변수들을 설정한다
- 마지막으로 매개변수가 없는 build 메서드를 호출해서 필요한 객체를 얻는다
ex) 예를 들면
- User class 가 있을때
- new UserBuilder 만들고
- UserBuilder.name("재현").email("hihi@naver.com"); 이렇게 필드 값을 주입한다
- User user = UserBuilder.build(); 로  user 객체를 얻는다.

**빌더 패턴에서 필드 값 유효성 검사**
- 잘못된 매개변수를 일찍 발견하려면 빌더의 생성자와 메서드에서 입력 매개변수를 검사하고
- build 메서드가 호출하는 생성자에서 여러 매개변수에 걸친 불변식을 검사한다


**빌더 패턴 장점**
- 빌더에 넘기는 매개변수에 따라서 다른 개게를 만들수도 있다
- 유연하다는 뜻이다.
- 가장 큰 장점은 불변객체를 만들수 있다는 점이다.

**빌더 패턴의 단점**
- 객체를 만들려면 빌더부터 만들어야한다
- 빌더 생성 비용이 크지는 않지만 성능에 민감하다면 문제가 될수 있다

**빌더 패턴을 선택하는 기준**
- 처리해야할 매개변수가 많을때
- 매개변수가 4개 이상은 되어야 값어치를 한다


---

**결국에는**
- API는 시간이 지날수록 매개변수가 많아지는 경향이 있다
- 결국 매개변수가 많아지면 빌더 패턴으로 전환할수도 있다
- 그래서 빌더로 시작하는 편이 나을때가 많다

<br/>

## 나의 정리
- 기존에 아이템 1에서는 new 생성자 말고 정적 팩터리 메서드를 고려하라고 했다
- 하지만 아이템 2에서는 클래스의 필드값이 많아져서 매개변수가 많아질때는 빌더 패턴을 고려하라고 한다
- 자바 빈즈 패턴도 있지만 이 패턴의 가장 큰 단점은 setter()를 사용하는 방식이라 불변객체를 만들수 없다
- 그래서 빌더 패턴을 고려하라고 한다 왜냐하면 가독성과 유연성이 좋아지고 최종적으로 한번만 객체를 생성해서 불변성을 유지하는 객체를 만들수 있어서이다
- 매개변수 4개 이상일때 빌더 패턴의 장점이 도드라진다고 한다

하지만 책에서는 결국 API는 시간이 지날수록 매개변수가 많아질수도 있으니 결국 처음부터 빌더 패턴을 시작하는편이 나을때가 많다고 한다
