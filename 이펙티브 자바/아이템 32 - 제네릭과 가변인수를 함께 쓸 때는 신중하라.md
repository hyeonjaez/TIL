## 아이템 32 - 제네릭과 가변인수를 함께 쓸 때는 신중하라


- 자바의 가변인수 메서드는 내부적으로 배열을 생성해서 인자를 담는다.
- 하지만 배열은 실체화 되어 런타임에도 타입을 알고 제네릭은 소거 되어 타입 정보가 지워진다
- 그래서 가변인수와 제네릭을 섞어서 사용하면 타입 안정성이 깨질 위험이 있다.
- 가변인수 메서드와 제네릭이 만나면 힙 오염 문제가 생길수 있다

<br/>

**힙 오염**
- 컴파일러가 보장한 타입과 런타임의 실제 객체 타입이 달라져버린 상태
- 제네릭 타입 변수로 선언된 객체에 원래 의도한 타입과 다른 객체가 들어가 있는 상황

<br/>

**권장 방식**
1. 가능하면 제네릭 + varags를 피하라

- List<T>나 Collection<T>를 인자로 받도록 API 설계

2. 정말 필요하면 @SafeVarags 사용
- 메서드가 varargs 배열로 외부로 노출하거나 수정하지 않음이 확실할 때만 사용


**@SafeVarags**
- 제네릭과 가변인수를 함께 사용할 때 발생하는 비검사 경고를 억제하면서 해당 메서드가 타입 안전하다는 걸 보장할때 사용
- 적용 조건
  - static, final, 또는 private 메서드에만 붙일수 있다
  - varargs 배열을 외부에 노출하지 않고 내부에서 안전하게만 사용할 때만 붙이기


<br/>

**나의 정리**
- 가변인수는 배열을 사용하는데 배열과 제네릭의 타입 규칙이 다르기 때문에 제네릭 varargs 매개변수는 타입 안전하지는 않지만 허용된다 메서드에 제네릭 varargs 매개변수를 사용해야한다면 먼저 그 메서드가 타입 안전한지 확인하고 @SafeVarargs 어노테이션을 달자
