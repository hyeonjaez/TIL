## 3. 커넥션을 매번 만드는게 왜 비효율적일까? 네트워크 관점에서

- 서버와 클라이언트 사이에서 데이터를 주고받기 위해 맺는 연결

### 🧠 개념 설명

**커넥션을 매번 만드는게 왜 비효율적인가?**

1. TCP
- TCP 연결을 하려면 3-way handshake 과정을 거쳐야 연결된다.
  - 과정 :
      1. 클라이언트 -> 서버 SYN
      2. 서버 -> 클라이언트 SYN-ACK
      3. 클라이언트 -> 서버 ACK

- 해제할때는 4-way handshake 과정을 거쳐야 해제가 된다.

-> 위와 같이 요청마다 커넥션을 생성, 종료하면 불필요한 지연과 트래픽 증가가 발생한다.

<br/>

2. 데이터베이스 연결 비용
- 사용자가 요청을 보냈다고 생각을 하자 서버에서 과정은
  1. 서버에서 커넥션을 생성하고 데이터베이스에 요청을 보낸다
  2. SQL 실행하고 데이터를 서버로 응답한다
  3. 서버는 커넥션을 해제한다

위와 같이 커넥션을 새로 만드는 시간이 추가되기 때문에 결과적으로 응답 속도에 영향을 준다.

<br/>

3. 네트워크 자원 낭비
- 연결할때 마다 네트워크 자원을 계속해서 사용하게 된다.
- 커넥션 1개당 필요한 자원은 아래와 같이 있다.
  - 포트 번호 : 커넥션 구분을 위한 고유 식별자 (포트 수는 제한적임)
  - 소켓 : OS 수준의 커넥션 객체 -> 메모리 
  - 네트워크 대역폭 : 데이터 송수신으로 인한 트래픽 사용
  - CPU : 커넥션 설정, 해제 시의 연산 부담 
  - 메모리 : 커넥션 상태 저장 
- 이렇게 커넥션 수가 많아질 수록 시스템의 자원이 고갈되어 진다.

<br/>

---
### ✅ 한줄로 설명 하기

- 커넥션은 생성과 종료에 비용이 크기 때문에 매 요청마다 새로 만들면 지연과 자원 낭비가 발생한다.
