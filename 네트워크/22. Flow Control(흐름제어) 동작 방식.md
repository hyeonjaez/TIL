## 22. Flow Control(흐름제어) 동작 방식

### 🧠 개념 설명
- 송신자가 수신자가 처리할 수 있는 속도 이상으로 데이터를 보내지 않는것
- 네트워크 속도는 빠르지만 수신 측의 버퍼 용량이나 처리 속도가 느리다면 데이터가 쌓이고 결국 손실이 발생할수 있다
- 그래서 송신자가 수신자의 처리 능력에 맞춰서 전송 속도를 조절해야한다

<br/>

**TCP에서의 동작 방식 (Sliding Window)**

1. 윈도우 크기
  - 수신 측이 현재 받아들일 수 있는 데이터의 양을 송신 측에 알려준다
  - 이런 값은 TCP 헤더의 Window Size 필드에 담겨서 전송된다

2. 송신자는 윈도우 크기만큼만 전송 가능
  - 수신자가 내 버퍼에 몇 바이트 받을수 있어라고 말한다고 하면
  - 송신자는 해당 최대 바이트까지만 ACK 없이 보낼수 있다

3. 수신자가 데이터 처리 후에 ACK와 함께 새로운 윈도우 크기 전달
  - 데이터를 처리하고 버퍼에 여유가 생기면 이제 몇 바이트 더 보낼수 있어 라고 다시 알려준다
  - 송신자는 이에 맞춰서 추가 전송을 진행한다

4. 슬라이딩 동작
  - 데이터가 확인 되면 윈도우가 앞으로 슬라이딩 되어서 새로운 데이터 전송이 가능해진다

<br/>

**ACK 없이 보낼수 있다의 뜻**
- 송신자가 데이터를 1개 보낼때 수신자는 ACK 보낸다 -> 받았다는 확인 응답
- 그래서 매번 ACK를 기다리고 받으면 다음 전송이 가능하다
- 효율이 떨어지니까 TCP의 슬라이딩 윈도우 방식에서는 송신자가 수신자의 N 바이트 만큼 ACK가 오기전이라도 연속해서 데이터를 보낼수 있다라는 뜻이다
- 이렇게 해서 ACK를 기다릴 필요 없이 전송 효율이 올라간다

---
### ✅ 한줄로 설명 하기
- Flow Control은 송신자가 수신자가 처리할 수 있는 속도 이상으로 데이터를 보내지 않는 것이다 다시말해 수신자 버퍼 오버플로우를 방지하는 것이다
- 동작 방식은 Sliding Window 방식으로 수신자가 알려준 윈도우 크기만큼 송신자가 계속 전송하고 수신자의 ACK와 새로운 윈도우 크기에 따라서 윈도우가 앞으로 이동하면서 전송 효율을 높이는 것이다
